# 지능형 장애 관리 플랫폼
## 요약
> 현대는 기술의 발전 속도만큼 사용자의 성향의 변화도 빠르다. 시대의 흐름에 뒤쳐지지 않는 머신러닝 서비스를 제공하기 위해서는 매일 발생하는 정형/비정형 빅데이터에서 유연하고 민첩한 데이터 전 처리를 통한 학습 데이터 확보가 중요하다.
> 본 내용에서는 정형/비정형 준실시간 데이터 전처리시 정규화, 필터링, 지표 추출 방법을 제안하고 구조와 기능에 대해 설명한다.
## 서론
대규모의 인프라 자원과 서비스를 관리하는 기업의 경우 가장 큰 문제는 장애이다.
장애는 서비스 품질에 큰 영향을 주는 요소로 모든 IT 기업에서 장애를 사전 감지하거나 빠르게 대응할 수 있도록 다양한 솔루션 도입 및 프로세스를 수립하고 있다.
본 내용에서는 다양한 플랫폼과 서비스에서 발생하는 장애 메시지를 실시간 수집하고 데이터 전처리를 통해 장애의 원인 분석 및 조치할 수 있는 플랫폼을 구축하고 원인 분석/조치 방안 추천을 위한 준실시간 데이터 전처리 플랫폼을 설명하고자 한다.

## 관련 연구
### 빅데이터 정의 및 특성
가트너는 빅데이터에 대해 큰 용량, 빠른 속도, 그리고 높은 다양성을 갖는 정보 자산으로써 이를 통해 의사 결정 및 통찰 발견, 프로세스 최적화를 향상시키기 위해서는 새로운 형태의 처리 방식이 필요하다고 정의하였다.
그리고 볼륨(Volume), 속도(Velocity), 다양성(Variety) 3가지 요소를 핵심 특징으로 설명하고 있는데 장애 관련 데이터의 경우 상황에 따라 다양한 형태(Core Dump, Heap Dump, Log 등)의 장애 데이터가 대량의 볼륨으로 빠르게 발생합니다.

### 데이터 전처리
데이터 전처리란 분석 목적에 맞는 데이터를 수집하고 분석이 가능한 데이터로 축소, 제거, 수정 등과 같은 단계를 거쳐 최상의 분석결과를 도출하기 위한 과정을 의미한다.
데이터 전처리는 5단계로 진행하는데 첫 번째로 데이터 클리닝(Data Cleaning)단계로 결측값과 잡음을 제거한다.
두 번째는 데이터 통합(Data Integration) 단계이다. 이 단계에서는 데이터 값의 특성과 메타데이터를 이용하여 개체 식별 문제를 해결한다.
세 번째는 데이터 축소(Data reduction)로 차원/수치/수량 축소를 수행한다. 네 번째로 데이터 변환(Data Transformation)은 분석에 적합한 포맷으로 데이터를 바꾸는 것을 의미한다.
마지막으로 다섯 번째 데이터 이산화(Data Discretization)는 정규화를 통한 수치형 데이터 변환 작업을 의미한다.

### 특징 선택
머신러닝을 위한 데이터는 다양한 특성을 가지고 있다.
Filter, Wrapper, Embedded 방법 등을 이용하여 학습에 반드시 필요한 특징만을 선택하는 방법이다.

### 노이즈 데이터 제거
노이즈 데이터란 손상되거나 왜곡된 혹은 중복된 데이터를 의미한다.
이러한 노이즈 데이터는 기계학습 모델의 부정확하고 잘못된 결과를 야기할 수 있기 때문에 학습 이전에 제거되어야 한다.
불필요한 데이터를 제거함으로써 학습 정확도 및 학습 속도를 향상시킬 수 있다.

### 차원 감소
데이터가 많은 특징을 포함할 경우 데이터의 분석에 어려움이 있고, 3개 이상의 차원이 있을 경우 시각화가 어려워진다.
이는 특징 선택 기법과 비슷한 계념이지만, 차원 감소에는 특징 선택뿐만 아니라 특징 추출을 포함한다.
특징 추출이란 학습에 필요한 원본 데이터와 상이한 형태의 데이터를 추출하는 방법이다.

### 지능형 장애 관리 플랫폼 아키텍처
본고에서 설명하고자 하는 데이터 전처리 플랫폼은 인프라 자원 혹은 서비스 어플리케이션 장애가 발생할 경우 장애를 빠르게 분석/조치할 수 있는 방안을 제시하는 운영 지원 지능화 플랫폼이다.
운영 지원 지능화 플랫폼의 구성요소 및 개발언어, 특징은 아래와 같습니다.

#### 구성요소
![Fig. 1. 구성 요소](/doc/프로토타입_구성도.bmp "전체 아키텍처")

#### 운영체제
* Ubuntu 18.04.3 LTS

#### 데이터 베이스
* MariaDB 10.4

#### 개발언어
* Python 3.7.3

#### 관련 라이브러리
* Flask 1.1.1
* Celery 4.3.0
* RESTPlus 0.13.0
* Redis 5.0.5

#### 특징
* 실시간 데이터 수집
* 스케줄링을 이용한 데이터 전처리
* 다양한 인프라 자원, 신규 서비스에 대한 장애 지원

## 구현 및 적용
### 지능형 장애 관리 플랫폼 구현
데이터 전처리 플랫폼은 총 6개의 구성 요소로 구현되어 있습니다.

#### Channel Adapter
인프라 자원, 서비스 장애 발생시 실시간 이벤트 감지
![Fig. 2. Channel Adapter](/doc/ChannelAdapter.bmp "Channel Adapter")

#### Chatbot
이벤트 정보를 이해 관계자에게 알려주고, 분석/조치 가능한 행위를 추천하는 역할을 수행
![Fig. 3. ChatBot](/doc/Chatbot.bmp "ChatBot")

#### Collector
이해 관계자가 수행하는 작업을 실시간 수집
![Fig. 4. Collector](/doc/Collector.bmp "Collector")

#### Recommender
발생한 이벤트 분석/조치할 수 있는 작업 추천
![Fig. 5. Recommender](/doc/Recommender.bmp "Recommender")

#### Task Executor
이해 관계자가 요청한 작업을 수행
![Fig. 6. Task Executor](/doc/TaskExecutor.bmp "Task Executor")

#### Analyzer
가장 효율적인 작업에 대한 추천도 분석
![Fig. 7. Analyzer](/doc/Analyzer.bmp "Analyzer")

### 시험 및 평가
#### 평가 장비
* CPU: 인텔 코어 i7-8565U 프로세서(1.80GHz, 4코어)
* Memory: 16GB DDR4
* HDD: 512GB SSD

#### 테스트 데이터 유형 및 건수
* 텍스트 기반 유형별 장애 메시지 100건

#### 시험 방법
장애 알림 시스템과 동일한 DB 테이블 구성 후 테스트를 위해 수집한 유형별 장애 메시지를 랜덤하게 입력하여 장애 상황 발생

#### 평가 방법
실시간 장애 감지 여부 및 이해 관계자에게 적합한 분석/조치 행위 추천 정확도, 실시간 이해 관계자 행위 수집 여부, 데이터 전처리 성능 및 동작 여부

## 결론
장애감지 영역 성능은 1분 이내 누락없이 장애감지가 이루어 졌고, 이해 관계자가 발생시키는 행위에 대한 정보 수집은 비동기 기반으로 처리되어 지연이 발생하거나 정보 유실은 발생하지 않았습니다.
수집된 데이터에 대한 머신러닝 데이터 전처리 성능과 정확도 측정은 장애 데이터의 특성상 발생하는 데이터양이 많지 않아 대부분 5분이내 전처리가 완료되었고, 행위 추천도의 정확도는 95% 이상이었습니다.

![Fig. 8. 지능형 장애 관리 플랫폼 사용자 인터페이스](/doc/chatbot.png "사용자 인터페이스")
